{"version":3,"sources":["App.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.module.css","components/services/apiService.jsx","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Searchbar/Searchbar.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","components/PhotosView/PhotosView.jsx","App.js","index.js","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css"],"names":["module","exports","API","fetchPhotos","query","page","fetch","then","response","json","ImageGalleryItem","webformatURL","tags","largeImageURL","onClick","className","s","src","alt","ImageGalleryItemImage","data-lgimage","ImageGallery","photos","map","photo","id","Searchbar","onSubmit","useState","input","setInput","SearchForm","e","preventDefault","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","onChange","target","value","autoComplete","autoFocus","placeholder","Button","Modal","lgImg","altOfImage","handleClick","useCallback","currentTarget","code","useEffect","window","addEventListener","removeEventListener","Overlay","tabIndex","PhotosView","setQuery","setPhotos","setPage","largeImg","setLargeImg","setAltOfImage","error","setError","isOverlayVisible","setIsOverlayVisible","isLoading","setIsLoading","apiService","hits","prevPhotos","catch","finally","setTimeout","scrollTo","top","document","documentElement","scrollHeight","behavior","shouldRenderLoadMoreButton","length","dataset","lgimage","color","height","width","style","textAlign","prevPage","App","Component","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.7a7007d3.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__3TPeg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__31SsI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3v81J\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__1_CTD\",\"SearchForm\":\"Searchbar_SearchForm__2E63z\",\"SearchFormButton\":\"Searchbar_SearchFormButton__3Ofub\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__2Pb43\",\"SearchFormInput\":\"Searchbar_SearchFormInput__JgabD\"};","function fetchPhotos(query, page) {\r\n  return fetch(\r\n    `https://pixabay.com/api/?q=${query}&page=${page}&key=20663127-62d3229d929679f587996a550&image_type=photo&orientation=horizontal&per_page=12`,\r\n  ).then(response => response.json());\r\n}\r\n\r\nconst API = {\r\n  fetchPhotos,\r\n};\r\n\r\nexport default API;\r\n","import s from './ImageGalleryItem.module.css';\r\n\r\nfunction ImageGalleryItem ({ webformatURL, tags, largeImageURL, onClick }) {\r\n  return (\r\n    <>\r\n    <li className={s.ImageGalleryItem}>\r\n      <img\r\n        src={webformatURL}\r\n        alt={tags}\r\n        className={s.ImageGalleryItemImage}\r\n        data-lgimage={largeImageURL}\r\n        onClick={onClick}\r\n      />\r\n    </li>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import s from './ImageGallery.module.css';\r\nimport ImageGalleryItem from './ImageGalleryItem';\r\n\r\nfunction ImageGallery ({ photos, onClick }) {\r\n  return (\r\n    <ul className={s.ImageGallery}>\r\n      {photos.map(photo => {\r\n        return (\r\n          <ImageGalleryItem\r\n            key={photo.id}\r\n            webformatURL={photo.webformatURL}\r\n            tags={photo.tags}\r\n            largeImageURL={photo.largeImageURL}\r\n            onClick={onClick}\r\n          />\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default ImageGallery;\r\n","import s from './Searchbar.module.css';\r\nimport { useState } from 'react';\r\n\r\nfunction Searchbar({ onSubmit }) {\r\n  const [input, setInput] = useState('');\r\n\r\n  const handleInput = e => setInput(e.target.value);\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    onSubmit(input);\r\n  };\r\n\r\n  return (\r\n    <header className={s.Searchbar}>\r\n      <form className={s.SearchForm} onSubmit={handleSubmit}>\r\n        <button type=\"submit\" className={s.SearchFormButton}>\r\n          <span className={s.SearchFormButtonLabel}>Search</span>\r\n        </button>\r\n\r\n        <input\r\n          className={s.SearchFormInput}\r\n          onChange={handleInput}\r\n          type=\"text\"\r\n          autoComplete=\"off\"\r\n          autoFocus\r\n          placeholder=\"Search images and photos\"\r\n        />\r\n      </form>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Searchbar;\r\n\r\n// import s from './Searchbar.module.css';\r\n// import { Component } from 'react';\r\n\r\n// class Searchbar extends Component {\r\n//   state = {\r\n//     input: '',\r\n//   };\r\n\r\n//   handleInput = e => {\r\n//     this.setState({\r\n//         input: e.target.value\r\n//     })\r\n\r\n//   };\r\n\r\n//   handleSubmit = e => {\r\n//     e.preventDefault();\r\n\r\n//     this.props.onSubmit(this.state.input)\r\n//   };\r\n\r\n//   render() {\r\n//     return (\r\n//       <header className={s.Searchbar}>\r\n//         <form className={s.SearchForm} onSubmit={this.handleSubmit}>\r\n//           <button type=\"submit\" className={s.SearchFormButton}>\r\n//             <span className={s.SearchFormButtonLabel}>Search</span>\r\n//           </button>\r\n\r\n//           <input\r\n//             className={s.SearchFormInput}\r\n//             onChange={this.handleInput}\r\n//             type=\"text\"\r\n//             autoComplete=\"off\"\r\n//             autoFocus\r\n//             placeholder=\"Search images and photos\"\r\n//           />\r\n//         </form>\r\n//       </header>\r\n//     );\r\n//   }\r\n// }\r\n\r\n// export default Searchbar;\r\n","import s from './Button.module.css';\r\n\r\nfunction Button({ onClick }) {\r\n  return (\r\n    <button type=\"button\" className={s.Button} onClick={onClick}>\r\n      Load more\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default Button;","import s from './Modal.module.css';\r\nimport { useEffect, useCallback } from 'react';\r\n\r\nfunction Modal({ lgImg, altOfImage, onClick }) {\r\n  const handleClick = useCallback(\r\n    e => {\r\n      if (e.currentTarget === e.target) {\r\n        onClick();\r\n      }\r\n\r\n      if (e.code === 'Escape') {\r\n        onClick();\r\n      }\r\n    },\r\n    [onClick],\r\n  );\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('keydown', handleClick);\r\n\r\n    return () => {\r\n      window.removeEventListener('keydown', handleClick);\r\n    };\r\n  }, [handleClick]);\r\n\r\n  return (\r\n    <div className={s.Overlay} onClick={handleClick} tabIndex=\"0\">\r\n      <div className={s.Modal}>\r\n        <img src={lgImg} alt={altOfImage} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Modal;\r\n","import { useState, useEffect } from 'react';\r\nimport Loader from 'react-loader-spinner';\r\nimport apiService from '../services/apiService';\r\n\r\nimport ImageGallery from '../ImageGallery';\r\nimport Searchbar from '../Searchbar';\r\nimport Button from '../Button/Button';\r\nimport Modal from '../Modal';\r\n\r\nfunction PhotosView() {\r\n  const [query, setQuery] = useState('');\r\n  const [photos, setPhotos] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const [largeImg, setLargeImg] = useState(null);\r\n  const [altOfImage, setAltOfImage] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const [isOverlayVisible, setIsOverlayVisible] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!query) return;\r\n\r\n    setIsLoading(true);\r\n\r\n    apiService\r\n      .fetchPhotos(query, page)\r\n      .then(({ hits }) => {\r\n        setPhotos(prevPhotos => [...prevPhotos, ...hits]);\r\n      })\r\n      .catch(error => setError(error))\r\n      .finally(setIsLoading(false));\r\n\r\n  }, [query, page]);\r\n\r\n  useEffect(() => {\r\n    if(page === 1) return\r\n    setTimeout(() => {\r\n      window.scrollTo({\r\n        top: document.documentElement.scrollHeight,\r\n        behavior: 'smooth',\r\n      });\r\n    }, 1000)    \r\n  }, [page]);\r\n\r\n  const loadMorePhotos = () => {\r\n    setPage(prevPage => prevPage + 1);\r\n  }\r\n\r\n  const handleSummit = input => {\r\n    if(input === query) return\r\n    setQuery(input);\r\n    setPhotos([]);\r\n    setPage(1);\r\n  };\r\n\r\n  const handlePhotoClick = e => {\r\n    setLargeImg(e.target.dataset.lgimage);\r\n    setAltOfImage(e.target.alt);\r\n    setIsOverlayVisible(true);\r\n  };\r\n\r\n  const handleOverlayClose = () => {\r\n    setIsOverlayVisible(false);\r\n  };\r\n\r\n  const shouldRenderLoadMoreButton = photos.length > 0 && !isLoading;\r\n\r\n  return (\r\n    <>\r\n      {error && <h1>Something went wrong. Please, try later.</h1>}\r\n\r\n      <Searchbar onSubmit={handleSummit} />\r\n\r\n      {photos.length > 0 && (\r\n        <ImageGallery photos={photos} onClick={handlePhotoClick} />\r\n      )}\r\n\r\n      {isLoading && (\r\n        <Loader\r\n          type=\"MutatingDots\"\r\n          color=\"#4169e1\"\r\n          height={100}\r\n          width={100}\r\n          style={{ textAlign: 'center' }}\r\n        />\r\n      )}\r\n\r\n      {shouldRenderLoadMoreButton && <Button onClick={loadMorePhotos} />}\r\n\r\n      {isOverlayVisible && (\r\n        <Modal\r\n          onClick={handleOverlayClose}\r\n          lgImg={largeImg}\r\n          altOfImage={altOfImage}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default PhotosView;\r\n\r\n// import { Component } from 'react';\r\n// import Loader from 'react-loader-spinner';\r\n\r\n// import ImageGallery from '../ImageGallery';\r\n// import Searchbar from '../Searchbar';\r\n// import Button from '../Button/Button';\r\n// import Modal from '../Modal';\r\n\r\n// class PhotosView extends Component {\r\n//   state = {\r\n//     query: '',\r\n//     photos: [],\r\n//     page: 1,\r\n//     largeImg: null,\r\n//     altOfImage: null,\r\n//     error: null,\r\n//     isOverlayVisible: false,\r\n//     isLoading: false,\r\n//   };\r\n\r\n//   componentDidUpdate(prevPr, prevSt) {\r\n//     if (prevSt.query !== this.state.query) {\r\n//       this.fetchPhotos();\r\n//     }\r\n//     if (prevSt.page !== this.state.page && prevSt.page !== 1) {\r\n//       window.scrollTo({\r\n//         top: document.documentElement.scrollHeight,\r\n//         behavior: 'smooth',\r\n//       });\r\n//     }\r\n//   }\r\n\r\n//   handleSummit = input => {\r\n//     this.setState({\r\n//       query: input,\r\n//       photos: [],\r\n//       page: 1,\r\n//     });\r\n//   };\r\n\r\n//   handlePhotoClick = e => {\r\n//     this.setState(prevSt => ({\r\n//       ...prevSt,\r\n//       largeImg: e.target.dataset.lgimage,\r\n//       altOfImage: e.target.alt,\r\n//       isOverlayVisible: true,\r\n//     }));\r\n//   };\r\n\r\n//   handleOverlayClose = () => {\r\n//     this.setState(prevSt => ({\r\n//       ...prevSt,\r\n//       isOverlayVisible: false,\r\n//     }));\r\n//   };\r\n\r\n//   fetchPhotos = () => {\r\n//     this.setState(prevSt => ({\r\n//       ...prevSt,\r\n//       isLoading: true,\r\n//     }));\r\n\r\n//     // setTimeout(() => {\r\n//     fetch(\r\n//       `https://pixabay.com/api/?q=${this.state.query}&page=${this.state.page}&key=20663127-62d3229d929679f587996a550&image_type=photo&orientation=horizontal&per_page=12`,\r\n//     )\r\n//       .then(response => response.json())\r\n//       .then(({ hits }) => {\r\n//         this.setState(({ photos, page }) => ({\r\n//           photos: [...photos, ...hits],\r\n//           page: page + 1,\r\n//         }));\r\n//       })\r\n//       .catch(error => this.setState({ error }))\r\n//       .finally(\r\n//         this.setState(prevSt => ({\r\n//           ...prevSt,\r\n//           isLoading: false,\r\n//         })),\r\n//       );\r\n//     // .finally(() => this.setState({ isLoading: false }));\r\n//     // }, 500);\r\n//   };\r\n\r\n//   render() {\r\n//     const {\r\n//       photos,\r\n//       isLoading,\r\n//       error,\r\n//       largeImg,\r\n//       altOfImage,\r\n//       isOverlayVisible,\r\n//     } = this.state;\r\n//     const shouldRenderLoadMoreButton = photos.length > 0 && !isLoading;\r\n\r\n//     return (\r\n//       <>\r\n//         {error && <h1>Something went wrong. Please, try later.</h1>}\r\n\r\n//         <Searchbar onSubmit={this.handleSummit} />\r\n\r\n//         {photos.length > 0 && (\r\n//           <ImageGallery photos={photos} onClick={this.handlePhotoClick} />\r\n//         )}\r\n\r\n//         {isLoading && (\r\n//           <Loader\r\n//             type=\"MutatingDots\"\r\n//             color=\"#4169e1\"\r\n//             height={100}\r\n//             width={100}\r\n//             style={{ textAlign: 'center' }}\r\n//           />\r\n//         )}\r\n\r\n//         {shouldRenderLoadMoreButton && <Button onClick={this.fetchPhotos} />}\r\n\r\n//         {isOverlayVisible && (\r\n//           <Modal\r\n//             onClick={this.handleOverlayClose}\r\n//             lgImg={largeImg}\r\n//             altOfImage={altOfImage}\r\n//           />\r\n//         )}\r\n//       </>\r\n//     );\r\n//   }\r\n// }\r\n\r\n// export default PhotosView;\r\n","import s from './App.module.css';\n\nimport PhotosView from './components/PhotosView/PhotosView';\n\nimport { Component } from 'react';\n\nclass App extends Component {\n  \n  render() {\n    return (\n      <div className={s.App}>\n        <PhotosView />\n      </div>\n    );\n  }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n// import './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1efYF\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__2_iu4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__jEf2O\",\"Modal\":\"Modal_Modal__3SEO0\"};"],"sourceRoot":""}